---
// FAQ component for landing page
import FaqItem from "./FaqItem.astro";

// Datos de preguntas frecuentes
const preguntas = [
  {
    numero: 1,
    categoria: "Recomendaciones de Uso",
    pregunta: "¿Dónde se recomienda ubicar un tablero eléctrico?",
    respuesta:
      "En lugares accesibles, secos y con buena ventilación. Evita zonas con humedad o exposición directa al sol.",
  },
  {
    numero: 2,
    categoria: "Normativas",
    pregunta: "¿Cómo verifico que mi tablero cumple con normas?",
    respuesta:
      "Busca etiquetas visibles y solicita certificados IEC 61439 y resultados de pruebas IP.",
  },
  {
    numero: 3,
    categoria: "Instalación y Garantía",
    pregunta: "¿Quién puede instalar un tablero eléctrico?",
    respuesta:
      "Debe ser instalado por personal certificado o instaladores autorizados por la SEC para garantizar seguridad y validez legal.",
  },
  {
    numero: 4,
    categoria: "Recomendaciones de Uso",
    pregunta: "¿Cuándo debo reemplazar un tablero eléctrico?",
    respuesta:
      "Tras 15-20 años, daños visibles, sobrecalentamiento o si no cumple normativas actuales.",
  },
  {
    numero: 5,
    categoria: "Instalación y Garantía",
    pregunta: "¿La garantía del tablero se pierde si lo modifico?",
    respuesta:
      "Sí. Cualquier modificación no autorizada puede anular la garantía y comprometer su seguridad.",
  },
];

// Preguntas adicionales (mostradas al hacer clic en "Ver más")
const preguntasAdicionales = [
  {
    numero: 6,
    categoria: "Mantenimiento",
    pregunta: "¿Qué mantenimiento requiere un tablero eléctrico?",
    respuesta:
      "Inspección visual mensual, limpieza semestral y revisión térmica anual por profesionales.",
  },
  {
    numero: 7,
    categoria: "Seguridad",
    pregunta: "¿Por qué necesito materiales resistentes a la corrosión?",
    respuesta:
      "Extienden la vida útil del tablero y reducen riesgos eléctricos.",
  },
  {
    numero: 8,
    categoria: "Especificaciones Técnicas",
    pregunta: "¿Qué nivel de protección IP debe tener un tablero?",
    respuesta:
      "IP41 para interiores, IP44 en exteriores techados y hasta IP54 para ambientes expuestos.",
  },
  {
    numero: 9,
    categoria: "Especificaciones Técnicas",
    pregunta:
      "¿Un tablero eléctrico es compatible con cualquier tipo de instalación?",
    respuesta:
      "No siempre. Debe adaptarse al voltaje, la carga eléctrica y al entorno donde se instalará.",
  },
  {
    numero: 10,
    categoria: "Especificaciones Técnicas",
    pregunta: "¿Puedo personalizar el diseño de un tablero eléctrico?",
    respuesta:
      "Sí. Se pueden adaptar gabinetes, accesorios y distribución interna según tus necesidades técnicas.",
  },
  {
    numero: 11,
    categoria: "Especificaciones Técnicas",
    pregunta: "¿Es importante que los componentes internos sean visibles?",
    respuesta:
      "Sí. Una buena visibilidad facilita las inspecciones, el mantenimiento y la identificación rápida de fallas.",
  },
  {
    numero: 12,
    categoria: "Normativas",
    pregunta: "¿Qué es la norma IEC 61439 y por qué es clave?",
    respuesta:
      "Regula la fabricación segura de tableros de baja tensión, incluyendo pruebas mecánicas, dieléctricas y de aislamiento.",
  },
  {
    numero: 13,
    categoria: "Normativas",
    pregunta: "¿Qué normas chilenas regulan los tableros eléctricos?",
    respuesta:
      "RIC Nº 02 (SEC) y Decreto Nº 8/2019 exigen cumplimiento de normas IEC y estándares de seguridad.",
  },
  {
    numero: 14,
    categoria: "Normativas",
    pregunta: "¿Debo distinguir entre normas IEC, NEMA y UL?",
    respuesta:
      "Sí. IEC son estándares internacionales, NEMA para gabinetes (EE.UU.) y UL certifica productos.",
  },
  {
    numero: 15,
    categoria: "Normativas",
    pregunta: "¿Qué consecuencias tiene no cumplir las normativas?",
    respuesta:
      "Riesgo de accidentes, multas, pérdida de garantía y posible invalidez de seguros.",
  },
];
---

<section id="faq" class="py-18 md:py-28 bg-gray-50">
  <div class="container mx-auto px-4">
    <div class="text-center mb-12">
      <h2
        class="text-3xl md:text-4xl font-bold font-heading mb-6 underline-title underline-center text-gray-600"
      >
        Resolvemos tus dudas
      </h2>
      <p class="text-lg text-gray-700 max-w-3xl mx-auto">
        Encuentra respuestas a las preguntas más comunes sobre tableros
        eléctricos y normativas.
      </p>
    </div>

    <div class="max-w-4xl mx-auto">
      <div class="space-y-6">
        {/* Preguntas principales */}
        {
          preguntas.map((item) => (
            <FaqItem
              numero={item.numero}
              pregunta={item.pregunta}
              respuesta={item.respuesta}
              categoria={item.categoria}
            />
          ))
        }

        {/* Más preguntas (colapsadas inicialmente) */}
        <div id="more-faqs" class="space-y-6 hidden">
          {
            preguntasAdicionales.map((item) => (
              <FaqItem
                numero={item.numero}
                pregunta={item.pregunta}
                respuesta={item.respuesta}
                categoria={item.categoria}
              />
            ))
          }
        </div>

        <!-- Botón para mostrar más preguntas -->
        <div class="text-center">
          <button
            id="show-more-faqs"
            class="bg-primary hover:bg-accent text-white font-bold py-2 px-6 rounded-md transition duration-300 ease-in-out transform hover:scale-105"
          >
            Ver más preguntas
          </button>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  // Script para manejar el comportamiento de las preguntas frecuentes
  document.addEventListener("DOMContentLoaded", () => {
    // Toggle para las preguntas individuales
    const faqToggles = document.querySelectorAll(".faq-toggle");
    faqToggles.forEach((toggle) => {
      toggle.addEventListener("click", () => {
        const content = toggle.nextElementSibling;
        const icon = toggle.querySelector(".faq-icon");

        // Toggle del contenido
        if (content) {
          content.classList.toggle("hidden");
        }

        // Rotar el icono
        if (content?.classList.contains("hidden")) {
          if (icon && icon instanceof HTMLElement)
            icon.style.transform = "rotate(0deg)";
        } else {
          if (icon && icon instanceof HTMLElement)
            icon.style.transform = "rotate(180deg)";
        }
      });
    });

    // Mostrar más preguntas
    const showMoreBtn = document.getElementById("show-more-faqs");
    const moreFaqs = document.getElementById("more-faqs");

    if (showMoreBtn && moreFaqs) {
      showMoreBtn.addEventListener("click", () => {
        moreFaqs.classList.toggle("hidden");

        if (moreFaqs.classList.contains("hidden")) {
          showMoreBtn.textContent = "Ver más preguntas";
        } else {
          showMoreBtn.textContent = "Ver menos preguntas";
        }
      });
    }
  });
</script>
